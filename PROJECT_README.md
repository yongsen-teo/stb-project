# STB Project App Writeup

## Main function of app

- user sends a request query to the REST API app, to get a list of related dining
  locations or event locations in Singapore.
- App will return structured data for the user

## Chosen Tools and why we chose them

1. Google Places API (new)

- provides a searchText endpoint that finds local business information
- multiple field headers to choose to filter what we need (big part of task
  requirements are already covered in their API)
- examples are: Name, Address, Opening Hours, Contact Number, Images Information

2. LLM provider (Google Gemini 2.0 Flash Expt)

- easy integration with google places API
- decent, cheap and fast performance.

## Data Flow Steps

- Sends user query to POST Request at [http://0.0.0.0:8000/api/v1/locations/search]
- App calls Places API with specific fields
- Places API returns a list of places relating to query,
  RatingWeight used to sort places (rating x ratingCount)
- App format some fields (e.g. openingHours) while using other fields for AI content generation.
- Place field "Photo name" used to call the Photos API.
- Photos API returns the content of the image and this can be used for image captioning.
- App organised formatted information and generated content into Response
  format.

## Explaining Design Choices

1. Using RatingWeight to rank list of places

- users typically wants to go to the most popular places or dining places with
  good ratings
- using RatingWeight is the simplest solution to get good quality results as
  both the rating count and rating score is taken into account

2. AI Generated Content

- the Places API is still limited in terms of some information
- task requirements needed a place description, image name captions and hashtags
- image name needing AI to generate is implied by "human-readable", hence no
  identifier string should be given
- using STB website examples for tonality matching (by few-shot prompting)
- using LLMs to generate location top offerings and estimated price (again,
  implied that its probably generated by AI)

3. App Design

- currently asynchronous code is absent, for production, we can include it to
  save time on image info generation
- we can also store prompts in YAML files or database and not hardcode them in
  the code
- Specific place requirements like "muslim, good for kids" could be refined
  further by using more place headers in Places API call
- the default Image size (1560x878) in the code was taken from STB websites
  examples and referencing their HTML on devtools

## Main challenges faced

- was challenging to format the opening hours data as some places could have
  multiple timeslots so we had to take that into account
- image content generation is slow if there are multiple images happening in synchronous
  manner.
- sometimes image data chosen might not be representative of the location (i.e.
  non-appealing images like logos etc ...)
- number of places in results will slow down processing time and increase
  data size, hence we limited places to default 5 places

## Future improvements

- Async for long processing tasks
- Use YAML or database to store prompts so its not hardcoded
- Use S3 to store Image data for future processing
- add more LLM based testing to align LLM tone to what we want (based on STB
  website examples as the standard)
